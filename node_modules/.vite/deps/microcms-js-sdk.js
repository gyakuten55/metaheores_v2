import {
  __commonJS,
  __toESM
} from "./chunk-G3PMV62Z.js";

// node_modules/retry/lib/retry_operation.js
var require_retry_operation = __commonJS({
  "node_modules/retry/lib/retry_operation.js"(exports, module) {
    function RetryOperation(timeouts, options) {
      if (typeof options === "boolean") {
        options = { forever: options };
      }
      this._originalTimeouts = JSON.parse(JSON.stringify(timeouts));
      this._timeouts = timeouts;
      this._options = options || {};
      this._maxRetryTime = options && options.maxRetryTime || Infinity;
      this._fn = null;
      this._errors = [];
      this._attempts = 1;
      this._operationTimeout = null;
      this._operationTimeoutCb = null;
      this._timeout = null;
      this._operationStart = null;
      this._timer = null;
      if (this._options.forever) {
        this._cachedTimeouts = this._timeouts.slice(0);
      }
    }
    module.exports = RetryOperation;
    RetryOperation.prototype.reset = function() {
      this._attempts = 1;
      this._timeouts = this._originalTimeouts.slice(0);
    };
    RetryOperation.prototype.stop = function() {
      if (this._timeout) {
        clearTimeout(this._timeout);
      }
      if (this._timer) {
        clearTimeout(this._timer);
      }
      this._timeouts = [];
      this._cachedTimeouts = null;
    };
    RetryOperation.prototype.retry = function(err) {
      if (this._timeout) {
        clearTimeout(this._timeout);
      }
      if (!err) {
        return false;
      }
      var currentTime = (/* @__PURE__ */ new Date()).getTime();
      if (err && currentTime - this._operationStart >= this._maxRetryTime) {
        this._errors.push(err);
        this._errors.unshift(new Error("RetryOperation timeout occurred"));
        return false;
      }
      this._errors.push(err);
      var timeout = this._timeouts.shift();
      if (timeout === void 0) {
        if (this._cachedTimeouts) {
          this._errors.splice(0, this._errors.length - 1);
          timeout = this._cachedTimeouts.slice(-1);
        } else {
          return false;
        }
      }
      var self = this;
      this._timer = setTimeout(function() {
        self._attempts++;
        if (self._operationTimeoutCb) {
          self._timeout = setTimeout(function() {
            self._operationTimeoutCb(self._attempts);
          }, self._operationTimeout);
          if (self._options.unref) {
            self._timeout.unref();
          }
        }
        self._fn(self._attempts);
      }, timeout);
      if (this._options.unref) {
        this._timer.unref();
      }
      return true;
    };
    RetryOperation.prototype.attempt = function(fn, timeoutOps) {
      this._fn = fn;
      if (timeoutOps) {
        if (timeoutOps.timeout) {
          this._operationTimeout = timeoutOps.timeout;
        }
        if (timeoutOps.cb) {
          this._operationTimeoutCb = timeoutOps.cb;
        }
      }
      var self = this;
      if (this._operationTimeoutCb) {
        this._timeout = setTimeout(function() {
          self._operationTimeoutCb();
        }, self._operationTimeout);
      }
      this._operationStart = (/* @__PURE__ */ new Date()).getTime();
      this._fn(this._attempts);
    };
    RetryOperation.prototype.try = function(fn) {
      console.log("Using RetryOperation.try() is deprecated");
      this.attempt(fn);
    };
    RetryOperation.prototype.start = function(fn) {
      console.log("Using RetryOperation.start() is deprecated");
      this.attempt(fn);
    };
    RetryOperation.prototype.start = RetryOperation.prototype.try;
    RetryOperation.prototype.errors = function() {
      return this._errors;
    };
    RetryOperation.prototype.attempts = function() {
      return this._attempts;
    };
    RetryOperation.prototype.mainError = function() {
      if (this._errors.length === 0) {
        return null;
      }
      var counts = {};
      var mainError = null;
      var mainErrorCount = 0;
      for (var i2 = 0; i2 < this._errors.length; i2++) {
        var error = this._errors[i2];
        var message = error.message;
        var count = (counts[message] || 0) + 1;
        counts[message] = count;
        if (count >= mainErrorCount) {
          mainError = error;
          mainErrorCount = count;
        }
      }
      return mainError;
    };
  }
});

// node_modules/retry/lib/retry.js
var require_retry = __commonJS({
  "node_modules/retry/lib/retry.js"(exports) {
    var RetryOperation = require_retry_operation();
    exports.operation = function(options) {
      var timeouts = exports.timeouts(options);
      return new RetryOperation(timeouts, {
        forever: options && (options.forever || options.retries === Infinity),
        unref: options && options.unref,
        maxRetryTime: options && options.maxRetryTime
      });
    };
    exports.timeouts = function(options) {
      if (options instanceof Array) {
        return [].concat(options);
      }
      var opts = {
        retries: 10,
        factor: 2,
        minTimeout: 1 * 1e3,
        maxTimeout: Infinity,
        randomize: false
      };
      for (var key in options) {
        opts[key] = options[key];
      }
      if (opts.minTimeout > opts.maxTimeout) {
        throw new Error("minTimeout is greater than maxTimeout");
      }
      var timeouts = [];
      for (var i2 = 0; i2 < opts.retries; i2++) {
        timeouts.push(this.createTimeout(i2, opts));
      }
      if (options && options.forever && !timeouts.length) {
        timeouts.push(this.createTimeout(i2, opts));
      }
      timeouts.sort(function(a2, b2) {
        return a2 - b2;
      });
      return timeouts;
    };
    exports.createTimeout = function(attempt, opts) {
      var random = opts.randomize ? Math.random() + 1 : 1;
      var timeout = Math.round(random * Math.max(opts.minTimeout, 1) * Math.pow(opts.factor, attempt));
      timeout = Math.min(timeout, opts.maxTimeout);
      return timeout;
    };
    exports.wrap = function(obj, options, methods) {
      if (options instanceof Array) {
        methods = options;
        options = null;
      }
      if (!methods) {
        methods = [];
        for (var key in obj) {
          if (typeof obj[key] === "function") {
            methods.push(key);
          }
        }
      }
      for (var i2 = 0; i2 < methods.length; i2++) {
        var method = methods[i2];
        var original = obj[method];
        obj[method] = (function retryWrapper(original2) {
          var op = exports.operation(options);
          var args = Array.prototype.slice.call(arguments, 1);
          var callback = args.pop();
          args.push(function(err) {
            if (op.retry(err)) {
              return;
            }
            if (err) {
              arguments[0] = op.mainError();
            }
            callback.apply(this, arguments);
          });
          op.attempt(function() {
            original2.apply(obj, args);
          });
        }).bind(obj, original);
        obj[method].options = options;
      }
    };
  }
});

// node_modules/retry/index.js
var require_retry2 = __commonJS({
  "node_modules/retry/index.js"(exports, module) {
    module.exports = require_retry();
  }
});

// node_modules/async-retry/lib/index.js
var require_lib = __commonJS({
  "node_modules/async-retry/lib/index.js"(exports, module) {
    var retrier = require_retry2();
    function retry(fn, opts) {
      function run(resolve, reject) {
        var options = opts || {};
        var op;
        if (!("randomize" in options)) {
          options.randomize = true;
        }
        op = retrier.operation(options);
        function bail(err) {
          reject(err || new Error("Aborted"));
        }
        function onError(err, num) {
          if (err.bail) {
            bail(err);
            return;
          }
          if (!op.retry(err)) {
            reject(op.mainError());
          } else if (options.onRetry) {
            options.onRetry(err, num);
          }
        }
        function runAttempt(num) {
          var val;
          try {
            val = fn(bail, num);
          } catch (err) {
            onError(err, num);
            return;
          }
          Promise.resolve(val).then(resolve).catch(function catchIt(err) {
            onError(err, num);
          });
        }
        op.attempt(runAttempt);
      }
      return new Promise(run);
    }
    module.exports = retry;
  }
});

// node_modules/microcms-js-sdk/dist/esm/microcms-js-sdk.js
var import_async_retry = __toESM(require_lib());
function e(e2, t2) {
  if (t2 == null || t2 > e2.length) t2 = e2.length;
  for (var r2 = 0, n2 = new Array(t2); r2 < t2; r2++) n2[r2] = e2[r2];
  return n2;
}
function t(e2) {
  if (Array.isArray(e2)) return e2;
}
function r(t2) {
  if (Array.isArray(t2)) return e(t2);
}
function n(e2, t2, r2, n2, i2, o2, u2) {
  try {
    var a2 = e2[o2](u2);
    var s2 = a2.value;
  } catch (e3) {
    r2(e3);
    return;
  }
  if (a2.done) {
    t2(s2);
  } else {
    Promise.resolve(s2).then(n2, i2);
  }
}
function i(e2) {
  return function() {
    var t2 = this, r2 = arguments;
    return new Promise(function(i2, o2) {
      var u2 = e2.apply(t2, r2);
      function a2(e3) {
        n(u2, i2, o2, a2, s2, "next", e3);
      }
      function s2(e3) {
        n(u2, i2, o2, a2, s2, "throw", e3);
      }
      a2(void 0);
    });
  };
}
function o(e2, t2, r2) {
  if (t2 in e2) {
    Object.defineProperty(e2, t2, { value: r2, enumerable: true, configurable: true, writable: true });
  } else {
    e2[t2] = r2;
  }
  return e2;
}
function u(e2, t2) {
  if (t2 != null && typeof Symbol !== "undefined" && t2[Symbol.hasInstance]) {
    return !!t2[Symbol.hasInstance](e2);
  } else {
    return e2 instanceof t2;
  }
}
function a(e2) {
  if (typeof Symbol !== "undefined" && e2[Symbol.iterator] != null || e2["@@iterator"] != null) return Array.from(e2);
}
function s(e2, t2) {
  var r2 = e2 == null ? null : typeof Symbol !== "undefined" && e2[Symbol.iterator] || e2["@@iterator"];
  if (r2 == null) return;
  var n2 = [];
  var i2 = true;
  var o2 = false;
  var u2, a2;
  try {
    for (r2 = r2.call(e2); !(i2 = (u2 = r2.next()).done); i2 = true) {
      n2.push(u2.value);
      if (t2 && n2.length === t2) break;
    }
  } catch (e3) {
    o2 = true;
    a2 = e3;
  } finally {
    try {
      if (!i2 && r2["return"] != null) r2["return"]();
    } finally {
      if (o2) throw a2;
    }
  }
  return n2;
}
function c() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function l() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function f(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var r2 = arguments[t2] != null ? arguments[t2] : {};
    var n2 = Object.keys(r2);
    if (typeof Object.getOwnPropertySymbols === "function") {
      n2 = n2.concat(Object.getOwnPropertySymbols(r2).filter(function(e3) {
        return Object.getOwnPropertyDescriptor(r2, e3).enumerable;
      }));
    }
    n2.forEach(function(t3) {
      o(e2, t3, r2[t3]);
    });
  }
  return e2;
}
function d(e2, t2) {
  var r2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var n2 = Object.getOwnPropertySymbols(e2);
    if (t2) {
      n2 = n2.filter(function(t3) {
        return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
      });
    }
    r2.push.apply(r2, n2);
  }
  return r2;
}
function p(e2, t2) {
  t2 = t2 != null ? t2 : {};
  if (Object.getOwnPropertyDescriptors) {
    Object.defineProperties(e2, Object.getOwnPropertyDescriptors(t2));
  } else {
    d(Object(t2)).forEach(function(r2) {
      Object.defineProperty(e2, r2, Object.getOwnPropertyDescriptor(t2, r2));
    });
  }
  return e2;
}
function h(e2, r2) {
  return t(e2) || s(e2, r2) || y(e2, r2) || c();
}
function v(e2) {
  return r(e2) || a(e2) || y(e2) || l();
}
function y(t2, r2) {
  if (!t2) return;
  if (typeof t2 === "string") return e(t2, r2);
  var n2 = Object.prototype.toString.call(t2).slice(8, -1);
  if (n2 === "Object" && t2.constructor) n2 = t2.constructor.name;
  if (n2 === "Map" || n2 === "Set") return Array.from(n2);
  if (n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2)) return e(t2, r2);
}
function m(e2, t2) {
  var r2, n2, i2, o2, u2 = { label: 0, sent: function() {
    if (i2[0] & 1) throw i2[1];
    return i2[1];
  }, trys: [], ops: [] };
  return o2 = { next: a2(0), "throw": a2(1), "return": a2(2) }, typeof Symbol === "function" && (o2[Symbol.iterator] = function() {
    return this;
  }), o2;
  function a2(e3) {
    return function(t3) {
      return s2([e3, t3]);
    };
  }
  function s2(o3) {
    if (r2) throw new TypeError("Generator is already executing.");
    while (u2) try {
      if (r2 = 1, n2 && (i2 = o3[0] & 2 ? n2["return"] : o3[0] ? n2["throw"] || ((i2 = n2["return"]) && i2.call(n2), 0) : n2.next) && !(i2 = i2.call(n2, o3[1])).done) return i2;
      if (n2 = 0, i2) o3 = [o3[0] & 2, i2.value];
      switch (o3[0]) {
        case 0:
        case 1:
          i2 = o3;
          break;
        case 4:
          u2.label++;
          return { value: o3[1], done: false };
        case 5:
          u2.label++;
          n2 = o3[1];
          o3 = [0];
          continue;
        case 7:
          o3 = u2.ops.pop();
          u2.trys.pop();
          continue;
        default:
          if (!(i2 = u2.trys, i2 = i2.length > 0 && i2[i2.length - 1]) && (o3[0] === 6 || o3[0] === 2)) {
            u2 = 0;
            continue;
          }
          if (o3[0] === 3 && (!i2 || o3[1] > i2[0] && o3[1] < i2[3])) {
            u2.label = o3[1];
            break;
          }
          if (o3[0] === 6 && u2.label < i2[1]) {
            u2.label = i2[1];
            i2 = o3;
            break;
          }
          if (i2 && u2.label < i2[2]) {
            u2.label = i2[2];
            u2.ops.push(o3);
            break;
          }
          if (i2[2]) u2.ops.pop();
          u2.trys.pop();
          continue;
      }
      o3 = t2.call(e2, u2);
    } catch (e3) {
      o3 = [6, e3];
      n2 = 0;
    } finally {
      r2 = i2 = 0;
    }
    if (o3[0] & 5) throw o3[1];
    return { value: o3[0] ? o3[1] : void 0, done: true };
  }
}
var w = function(e2) {
  return (function() {
    var t2 = i(function(t3, r2) {
      var n2;
      return m(this, function(i2) {
        n2 = new Headers(r2 === null || r2 === void 0 ? void 0 : r2.headers);
        return [2, (n2.has("X-MICROCMS-API-KEY") || n2.set("X-MICROCMS-API-KEY", e2), fetch(t3, p(f({}, r2), { headers: n2 })))];
      });
    });
    return function(e3, r2) {
      return t2.apply(this, arguments);
    };
  })();
};
var g = "microcms.io";
var q = "microcms-management.io";
var I = "v1";
var j = function(e2) {
  return e2 !== null && typeof e2 == "object";
};
var E = function(e2) {
  return typeof e2 == "string";
};
var P = function(e2) {
  if (!j(e2)) throw new Error("queries is not object");
  return new URLSearchParams(Object.entries(e2).reduce(function(e3, t2) {
    var r2 = h(t2, 2), n2 = r2[0], i2 = r2[1];
    return i2 !== void 0 && (e3[n2] = String(i2)), e3;
  }, {})).toString();
};
var O = function(e2) {
  var t2 = e2.serviceDomain, r2 = e2.apiKey, n2 = e2.retry;
  if (!t2 || !r2) throw new Error("parameter is required (check serviceDomain and apiKey)");
  if (!E(t2) || !E(r2)) throw new Error("parameter is not string");
  var o2 = "https://".concat(t2, ".").concat(g, "/api/").concat(I), u2 = (function() {
    var e3 = i(function(e4) {
      var t3, u3, a2, s2, c2, l2, d2, h2, v2;
      return m(this, function(y2) {
        switch (y2.label) {
          case 0:
            t3 = e4.endpoint, u3 = e4.contentId, a2 = e4.queries, s2 = a2 === void 0 ? {} : a2, c2 = e4.requestInit;
            l2 = w(r2), d2 = P(s2), h2 = "".concat(o2, "/").concat(t3).concat(u3 ? "/".concat(u3) : "").concat(d2 ? "?".concat(d2) : ""), v2 = (function() {
              var e5 = i(function(e6) {
                var t4, r3, n3;
                return m(this, function(i2) {
                  switch (i2.label) {
                    case 0:
                      i2.trys.push([0, 2, , 3]);
                      return [4, e6.json()];
                    case 1:
                      t4 = i2.sent(), r3 = t4.message;
                      return [2, r3 !== null && r3 !== void 0 ? r3 : null];
                    case 2:
                      n3 = i2.sent();
                      return [2, null];
                    case 3:
                      return [2];
                  }
                });
              });
              return function t4(t4) {
                return e5.apply(this, arguments);
              };
            })();
            return [4, (0, import_async_retry.default)((function() {
              var e5 = i(function(e6) {
                var t4, r3, n3, i2, o3, u4, a3;
                return m(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      s3.trys.push([0, 6, , 7]);
                      return [4, l2(h2, p(f({}, c2), { method: (r3 = c2 === null || c2 === void 0 ? void 0 : c2.method) !== null && r3 !== void 0 ? r3 : "GET" }))];
                    case 1:
                      if (!(t4 = s3.sent(), t4.status !== 429 && t4.status >= 400 && t4.status < 500)) return [3, 3];
                      return [4, v2(t4)];
                    case 2:
                      n3 = s3.sent();
                      return [2, e6(new Error("fetch API response status: ".concat(t4.status).concat(n3 ? "\n  message is `".concat(n3, "`") : "")))];
                    case 3:
                      if (!!t4.ok) return [3, 5];
                      return [4, v2(t4)];
                    case 4:
                      i2 = s3.sent();
                      return [2, Promise.reject(new Error("fetch API response status: ".concat(t4.status).concat(i2 ? "\n  message is `".concat(i2, "`") : "")))];
                    case 5:
                      return [2, (c2 === null || c2 === void 0 ? void 0 : c2.method) === "DELETE" ? void 0 : t4.json()];
                    case 6:
                      o3 = s3.sent();
                      if (o3.data) throw o3.data;
                      if ((u4 = o3.response) === null || u4 === void 0 ? void 0 : u4.data) throw o3.response.data;
                      return [2, Promise.reject(new Error("Network Error.\n  Details: ".concat((a3 = o3.message) !== null && a3 !== void 0 ? a3 : "")))];
                    case 7:
                      return [2];
                  }
                });
              });
              return function(t4) {
                return e5.apply(this, arguments);
              };
            })(), { retries: n2 ? 2 : 0, onRetry: function(e5, t4) {
              console.log(e5), console.log("Waiting for retry (".concat(t4, "/", 2, ")"));
            }, minTimeout: 5e3 })];
          case 1:
            return [2, y2.sent()];
        }
      });
    });
    return function t3(t3) {
      return e3.apply(this, arguments);
    };
  })();
  return { get: (function() {
    var e3 = i(function(e4) {
      var t3, r3, n3, i2, o3, a2;
      return m(this, function(s2) {
        switch (s2.label) {
          case 0:
            t3 = e4.endpoint, r3 = e4.contentId, n3 = e4.queries, i2 = n3 === void 0 ? {} : n3, o3 = e4.customRequestInit;
            if (!t3) return [3, 2];
            return [4, u2({ endpoint: t3, contentId: r3, queries: i2, requestInit: o3 })];
          case 1:
            a2 = s2.sent();
            return [3, 3];
          case 2:
            a2 = Promise.reject(new Error("endpoint is required"));
            s2.label = 3;
          case 3:
            return [2, a2];
        }
      });
    });
    return function(t3) {
      return e3.apply(this, arguments);
    };
  })(), getList: (function() {
    var e3 = i(function(e4) {
      var t3, r3, n3, i2, o3;
      return m(this, function(a2) {
        switch (a2.label) {
          case 0:
            t3 = e4.endpoint, r3 = e4.queries, n3 = r3 === void 0 ? {} : r3, i2 = e4.customRequestInit;
            if (!t3) return [3, 2];
            return [4, u2({ endpoint: t3, queries: n3, requestInit: i2 })];
          case 1:
            o3 = a2.sent();
            return [3, 3];
          case 2:
            o3 = Promise.reject(new Error("endpoint is required"));
            a2.label = 3;
          case 3:
            return [2, o3];
        }
      });
    });
    return function(t3) {
      return e3.apply(this, arguments);
    };
  })(), getListDetail: (function() {
    var e3 = i(function(e4) {
      var t3, r3, n3, i2, o3, a2;
      return m(this, function(s2) {
        switch (s2.label) {
          case 0:
            t3 = e4.endpoint, r3 = e4.contentId, n3 = e4.queries, i2 = n3 === void 0 ? {} : n3, o3 = e4.customRequestInit;
            if (!t3) return [3, 2];
            return [4, u2({ endpoint: t3, contentId: r3, queries: i2, requestInit: o3 })];
          case 1:
            a2 = s2.sent();
            return [3, 3];
          case 2:
            a2 = Promise.reject(new Error("endpoint is required"));
            s2.label = 3;
          case 3:
            return [2, a2];
        }
      });
    });
    return function(t3) {
      return e3.apply(this, arguments);
    };
  })(), getObject: (function() {
    var e3 = i(function(e4) {
      var t3, r3, n3, i2, o3;
      return m(this, function(a2) {
        switch (a2.label) {
          case 0:
            t3 = e4.endpoint, r3 = e4.queries, n3 = r3 === void 0 ? {} : r3, i2 = e4.customRequestInit;
            if (!t3) return [3, 2];
            return [4, u2({ endpoint: t3, queries: n3, requestInit: i2 })];
          case 1:
            o3 = a2.sent();
            return [3, 3];
          case 2:
            o3 = Promise.reject(new Error("endpoint is required"));
            a2.label = 3;
          case 3:
            return [2, o3];
        }
      });
    });
    return function(t3) {
      return e3.apply(this, arguments);
    };
  })(), getAllContentIds: (function() {
    var e3 = i(function(e4) {
      var t3, r3, n3, i2, o3, a2, s2, c2, l2, d2, h2, y2, b2, w2, g2, q2, I2;
      return m(this, function(m2) {
        switch (m2.label) {
          case 0:
            t3 = e4.endpoint, r3 = e4.alternateField, n3 = e4.draftKey, i2 = e4.filters, o3 = e4.orders, a2 = e4.customRequestInit;
            s2 = { draftKey: n3, filters: i2, orders: o3, limit: 100, fields: r3 !== null && r3 !== void 0 ? r3 : "id", depth: 0 };
            return [4, u2({ endpoint: t3, queries: p(f({}, s2), { limit: 0 }), requestInit: a2 })];
          case 1:
            c2 = m2.sent(), l2 = c2.totalCount, d2 = [], h2 = 0, y2 = function(e5) {
              return new Promise(function(t4) {
                return setTimeout(t4, e5);
              });
            }, b2 = function(e5) {
              return e5.every(function(e6) {
                return typeof e6 == "string";
              });
            };
            m2.label = 2;
          case 2:
            if (!(d2.length < l2)) return [3, 7];
            return [4, u2({ endpoint: t3, queries: p(f({}, s2), { offset: h2 }), requestInit: a2 })];
          case 3:
            w2 = m2.sent(), g2 = w2.contents, q2 = g2.map(function(e5) {
              return e5[r3 !== null && r3 !== void 0 ? r3 : "id"];
            });
            if (!b2(q2)) throw new Error("The value of the field specified by `alternateField` is not a string.");
            d2 = v(d2).concat(v(q2)), h2 += 100;
            I2 = d2.length < l2;
            if (!I2) return [3, 5];
            return [4, y2(1e3)];
          case 4:
            I2 = m2.sent();
            m2.label = 5;
          case 5:
            I2;
            m2.label = 6;
          case 6:
            return [3, 2];
          case 7:
            return [2, d2];
        }
      });
    });
    return function(t3) {
      return e3.apply(this, arguments);
    };
  })(), getAllContents: (function() {
    var e3 = i(function(e4) {
      var t3, r3, n3, i2, o3, a2, s2, c2, l2, d2, h2, v2;
      return m(this, function(y2) {
        switch (y2.label) {
          case 0:
            t3 = e4.endpoint, r3 = e4.queries, n3 = r3 === void 0 ? {} : r3, i2 = e4.customRequestInit;
            return [4, u2({ endpoint: t3, queries: p(f({}, n3), { limit: 0 }), requestInit: i2 })];
          case 1:
            o3 = y2.sent(), a2 = o3.totalCount, s2 = [], c2 = 0, l2 = function(e5) {
              return new Promise(function(t4) {
                return setTimeout(t4, e5);
              });
            };
            y2.label = 2;
          case 2:
            if (!(s2.length < a2)) return [3, 7];
            return [4, u2({ endpoint: t3, queries: p(f({}, n3), { limit: 100, offset: c2 }), requestInit: i2 })];
          case 3:
            d2 = y2.sent(), h2 = d2.contents;
            s2 = s2.concat(h2), c2 += 100;
            v2 = s2.length < a2;
            if (!v2) return [3, 5];
            return [4, l2(1e3)];
          case 4:
            v2 = y2.sent();
            y2.label = 5;
          case 5:
            v2;
            y2.label = 6;
          case 6:
            return [3, 2];
          case 7:
            return [2, s2];
        }
      });
    });
    return function(t3) {
      return e3.apply(this, arguments);
    };
  })(), create: (function() {
    var e3 = i(function(e4) {
      var t3, r3, n3, i2, o3, a2, s2, c2;
      return m(this, function(l2) {
        t3 = e4.endpoint, r3 = e4.contentId, n3 = e4.content, i2 = e4.isDraft, o3 = i2 === void 0 ? false : i2, a2 = e4.customRequestInit;
        if (!t3) return [2, Promise.reject(new Error("endpoint is required"))];
        s2 = o3 ? { status: "draft" } : {}, c2 = p(f({}, a2), { method: r3 ? "PUT" : "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(n3) });
        return [2, u2({ endpoint: t3, contentId: r3, queries: s2, requestInit: c2 })];
      });
    });
    return function(t3) {
      return e3.apply(this, arguments);
    };
  })(), update: (function() {
    var e3 = i(function(e4) {
      var t3, r3, n3, i2, o3;
      return m(this, function(a2) {
        t3 = e4.endpoint, r3 = e4.contentId, n3 = e4.content, i2 = e4.customRequestInit;
        if (!t3) return [2, Promise.reject(new Error("endpoint is required"))];
        o3 = p(f({}, i2), { method: "PATCH", headers: { "Content-Type": "application/json" }, body: JSON.stringify(n3) });
        return [2, u2({ endpoint: t3, contentId: r3, requestInit: o3 })];
      });
    });
    return function(t3) {
      return e3.apply(this, arguments);
    };
  })(), delete: (function() {
    var e3 = i(function(e4) {
      var t3, r3, n3, i2;
      return m(this, function(o3) {
        switch (o3.label) {
          case 0:
            t3 = e4.endpoint, r3 = e4.contentId, n3 = e4.customRequestInit;
            if (!t3) return [2, Promise.reject(new Error("endpoint is required"))];
            if (!r3) return [2, Promise.reject(new Error("contentId is required"))];
            i2 = p(f({}, n3), { method: "DELETE", headers: {}, body: void 0 });
            return [4, u2({ endpoint: t3, contentId: r3, requestInit: i2 })];
          case 1:
            o3.sent();
            return [2];
        }
      });
    });
    return function(t3) {
      return e3.apply(this, arguments);
    };
  })() };
};
var S = function(e2) {
  var t2 = e2.serviceDomain, r2 = e2.apiKey;
  if (!t2 || !r2) throw new Error("parameter is required (check serviceDomain and apiKey)");
  if (!E(t2) || !E(r2)) throw new Error("parameter is not string");
  var n2 = (function() {
    var e3 = i(function(e4) {
      var n3, o2, u2, a2, s2, c2, l2, d2, h2, v2, y2, b2, g2, I2, j2, E2;
      return m(this, function(O2) {
        switch (O2.label) {
          case 0:
            n3 = e4.path, o2 = e4.apiVersion, u2 = e4.queries, a2 = u2 === void 0 ? {} : u2, s2 = e4.requestInit;
            c2 = "https://".concat(t2, ".").concat(q, "/api/").concat(o2), l2 = w(r2), d2 = P(a2), h2 = "".concat(c2, "/").concat(n3).concat(d2 ? "?".concat(d2) : ""), v2 = (function() {
              var e5 = i(function(e6) {
                var t3, r3, n4;
                return m(this, function(i2) {
                  switch (i2.label) {
                    case 0:
                      i2.trys.push([0, 2, , 3]);
                      return [4, e6.json()];
                    case 1:
                      t3 = i2.sent(), r3 = t3.message;
                      return [2, r3 !== null && r3 !== void 0 ? r3 : null];
                    case 2:
                      n4 = i2.sent();
                      return [2, null];
                    case 3:
                      return [2];
                  }
                });
              });
              return function t3(t3) {
                return e5.apply(this, arguments);
              };
            })();
            O2.label = 1;
          case 1:
            O2.trys.push([1, 3, , 4]);
            return [4, l2(h2, p(f({}, s2), { method: (b2 = s2 === null || s2 === void 0 ? void 0 : s2.method) !== null && b2 !== void 0 ? b2 : "GET" }))];
          case 2:
            y2 = O2.sent();
            return [3, 4];
          case 3:
            g2 = O2.sent();
            if (g2.data) throw g2.data;
            if ((I2 = g2.response) === null || I2 === void 0 ? void 0 : I2.data) throw g2.response.data;
            return [2, Promise.reject(new Error("Network Error.\n  Details: ".concat((j2 = g2.message) !== null && j2 !== void 0 ? j2 : "")))];
          case 4:
            if (!!y2.ok) return [3, 6];
            return [4, v2(y2)];
          case 5:
            E2 = O2.sent();
            return [2, Promise.reject(new Error("fetch API response status: ".concat(y2.status).concat(E2 ? "\n  message is `".concat(E2, "`") : "")))];
          case 6:
            return [2, y2.json()];
        }
      });
    });
    return function t3(t3) {
      return e3.apply(this, arguments);
    };
  })();
  return { uploadMedia: (function() {
    var e3 = i(function(e4) {
      var t3, r3, i2, o2, a2, s2, c2, l2, f2, d2, p2, h2;
      return m(this, function(v2) {
        switch (v2.label) {
          case 0:
            t3 = e4.data, r3 = e4.name, i2 = e4.type, o2 = e4.customRequestHeaders;
            a2 = new FormData();
            if (!u(t3, Blob)) return [3, 1];
            if (t3.name) a2.set("file", t3, t3.name);
            else {
              if (!r3) throw new Error("name is required when data is a Blob");
              a2.set("file", t3, r3);
            }
            return [3, 9];
          case 1:
            if (!u(t3, ReadableStream)) return [3, 6];
            if (!r3) throw new Error("name is required when data is a ReadableStream");
            if (!i2) throw new Error("type is required when data is a ReadableStream");
            s2 = [], c2 = t3.getReader();
            v2.label = 2;
          case 2:
            return [4, c2.read()];
          case 3:
            if (!!(l2 = v2.sent()).done) return [3, 5];
            s2.push(l2.value);
            v2.label = 4;
          case 4:
            return [3, 2];
          case 5:
            a2.set("file", new Blob(s2, { type: i2 }), r3);
            return [3, 9];
          case 6:
            if (!(typeof t3 == "string" || u(t3, URL))) return [3, 9];
            f2 = u(t3, URL) ? t3 : new URL(t3);
            return [4, fetch(f2.toString(), o2 ? { headers: o2 } : void 0)];
          case 7:
            d2 = v2.sent();
            return [4, d2.blob()];
          case 8:
            p2 = v2.sent(), h2 = new URL(d2.url).pathname.split("/").pop();
            a2.set("file", p2, r3 !== null && r3 !== void 0 ? r3 : h2);
            v2.label = 9;
          case 9:
            return [2, n2({ path: "media", apiVersion: I, requestInit: { method: "POST", body: a2 } })];
        }
      });
    });
    return function(t3) {
      return e3.apply(this, arguments);
    };
  })() };
};
export {
  O as createClient,
  S as createManagementClient
};
//# sourceMappingURL=microcms-js-sdk.js.map
